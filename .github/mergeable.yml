# working code bot comments when the description is empty or the must_incluide regex # SW-HW Integration Testing Pull Request Review Checklist'
version: 2
mergeable:
  - when: pull_request.*
    validate:
      - do: description
        and :
          - no_empty:
              enabled: true # Cannot be empty when true.
              message: 'Description cant be empty' # this is optional, a default message is used when not specified.
          - must_include:
              regex: '# SW-HW Integration Testing Pull Request Review Checklist'
              #regex_flag: 'i' # Optional. Specify the flag for Regex. default is 'i', to disable default use 'none'
              message: 'fill the checklist'
          #Checking when both OK and NOK / NA checkboxes are selected
          - must_exclude:
              regex: '^\s+\-\s\[x\]\sOK\s*\:\s+\-\s\[x\]\sNOK\s*\/\s*NA\s*\:\s*[a-z A-Z \d \: \, \. \- \[\]]+$'
              regex_flag: m
              message: Selecting both "OK and NOK / OK" checkboxes are invalid, Select any one of the checkboxes in a particular checklist
          #Checking when both OK and NOK checkboxes are selected
          - must_exclude:
              regex: '^\s+\-\s\[x\]\sOK\s*\:\s+\-\s\[x\]\s*NOK\s*\:\s*[a-z A-Z \d \: \, \. \- \[\]]+$'
              regex_flag: m
              message: Selecting both checkboxes for "OK and NOK" is invalid , Select any one of the checkboxes in a particular checklist
          #Checking when both OK and NA checkboxes are selected
          - must_exclude:
              regex: '^\s+\-\s\[x\]\sOK\s*\:\s+\-\s\[x\]\s*NA\s*\:\s*[a-z A-Z \d \: \, \. \- \[\]]+$'
              regex_flag: m
              message: Selecting both checkboxes for "OK and NA" is invalid , Select any one of the checkboxes in a particular checklist
          #Checking when NOK \ NA is selected
          - must_exclude:
              regex: '^\s+\-\s\[ \]\sOK\s*\:\s+\-\s\[x\]\s*NOK\s*\/\s*NA\s*\:\s\[enter text here\]'
              regex_flag: m
              message: When "NOK \ NA" is selected, make sure either NOK or NA is kept by editing with a description
          #Checking when both OK and NOK / NA  checkboxes are empty
          - must_exclude:
              regex: '^\s+\-\s\[ \]\sOK\s*\:\s+\-\s\[ \]\s*NOK\s*\/\s*NA\s*\:\s*[a-z A-Z \d \: \, \. \- \[\]]+$'
              regex_flag: m
              message: Both "OK and NOK / OK" checkboxes should not be empty, Select any one of the checkboxes
          #Checking When both OK and NOK checkboxes are empty
          - must_exclude:
              regex: '^\s+\-\s\[ \]\sOK\s*\:\s+\-\s\[ \]\s*NOK\s*\:\s*[a-z A-Z \d \: \, \. \- \[\]]+$'
              regex_flag: m
              message: Both "OK and NOK" checkboxes should not be empty, Select any one of the checkboxes
          #Checking When both OK and NA checkboxes are empty
          - must_exclude:
              regex: '^\s+\-\s\[ \]\sOK\s*\:\s+\-\s\[ \]\s*NA\s*\:\s*[a-z A-Z \d \: \, \. \- \[\]]+$'
              regex_flag: m
              message: Both "OK and NA" checkboxes should not be empty, Select any one of the checkboxes

    pass:
      - do: comment
        payload:
          body: fill the checklist
    fail:
        - do: comment
          payload:
            body: 'Description cant be empty'

